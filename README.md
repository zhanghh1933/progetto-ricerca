# Reserch Project on image forensics

A resech project done in "Università degli Studi di Trento" on detecting the source of a shared image via 
Whatsapp, Telegram and Message using their web version.

The project is divided in a first part of creating the dataset. Taking a base of 350 image of 
varius dimension and characteristic we shared them via the three messaging app one time, then 
taking the shared image we shared another time. In last we have:

* 350 original image
* 1050 image shared 1 time
* 3150 image shared 2 time

The whole dataset is avaiable via a link on google drive.

Then the second part is to extract the feature of the images. We use two method, in one we use 
the standard JPEG library for extracting quantization table and other pixel base infomation.
Then the second method we rewrite the extraction of the quantization bean taking into account the fractional part
of the DCT's component, that are truncated in the normal procudure of JPEG.

Then the last part is to learn the selected classifiers and draw conclusions.

## Getting Started

These instructions will get you a copy of the project up and running on your local machine for development and testing purposes. See deployment for notes on how to deploy the project on a live system.

### Prerequisites

You need python 3.7 or higher, pip for package manager and if you want you can use virtual env.

Matlab version R2018b, or compatible.

Some tex editor for editing the autogenerated report from the python code. I'm using TeXstudio.

### Installing

Clone the repository and then open it as a project of pycharm.

Once is open in pycharm then make sure that a correct interpreter is selected in File -> Settings -> Project:...  -> Project interpreter

When everything is ready, open a console and then install all the requirements with the command:

```
pip install -r requirements.txt
```

This will install all the package needed.

Now from https://drive.google.com/open?id=1fwRt_wLnFs1CKxquDCVW6xvk1uKAfZyE download the dataset and 
copy into the project folder in the way that the structure of the folder will be exactly this:

```
project
├───dataset_complete
│   ├───messenger
│   ├───original
│   ├───telegram
│   └───whatsapp
├───double_sharing
│   ├───messenger
│   │   ├───messenger
│   │   ├───telegram
│   │   └───whatsapp
│   ├───telegram
│   │   ├───messenger
│   │   ├───telegram
│   │   └───whatsapp
│   └───whatsapp
│       ├───messenger
│       ├───telegram
│       └───whatsapp
├───matlab
│   ├───functions
│   └───libs
│       ├───jpeg-8
│       ├───jpeg_toolbox
│       └───ZIG_ZIG_SCAN
├───output
├───report
└───src
```
Be sure of the structure bucause inside the codes there are binding for those folders.

Inside the folder `output` there will be some `.mat` file, that are the features extracted from 
the images. If there are no file you can generate them by executing two Matlab file:

```
single_scenario_extract_features.m
double_scenario_extract_features.m
```

Onece you have the `.mat` file then you can run the python scipt for train the classifiers.

Now you are ready to start ^^

## How to work

For the script to work correctly you must launch them from the `/src/` folder and activate the
virtual environment if you are using one. The script `activate.bat` work on windows and on a 
preinstalled venv named `prog-ricerca`.

The command that you can launch are:

```
python classification_single_scenario.py 
python classification_single_scenario.py --new

python classification_double_scenario.py
python classification_double_scenario.py --new
```

The name of the script is self explaning, the argument `--new` is for use the features extracted
with the method done by us.

One you run the scripts, they write automatic a report in LaTex that can be found in the folder 
`report`. The report is divided into files and need a main file that include all the created files.

In this report you can find all the confusion matrix and cross validation done during the 
script. Also in `report/images/` you will find the confusion matrix in the form of image ready to use
in other place.

In the last the file `report_gjika.pdf` in the main folder is the result of this resech project
complete of explanation for the result that we obtained.

## License

This project is licensed under the MIT License - see the [LICENSE.md](LICENSE.md) file for details

## Acknowledgments

This project was made under the supervision of Giulia Boato, professor at UniTn, 
and Quoc Tin Phan Phd at UniTn.
